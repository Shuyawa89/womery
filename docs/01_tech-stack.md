# 技術選定書

## 概要

本ドキュメントは、本プロジェクトにおける技術選定の決定事項とその理由を記録する。

## 決定日

2024年12月18日

---

## 技術スタック一覧

| レイヤー | 技術 | バージョン（予定） |
|---------|------|-------------------|
| フロントエンド | Next.js + TypeScript | Next.js 14+ |
| バックエンド | Kotlin + Spring Boot | Kotlin 1.9+, Spring Boot 3.2+ |
| DB | PostgreSQL | 15+ |
| API定義 | OpenAPI 3.0 | - |
| コンテナ | Docker / Docker Compose | - |
| CI/CD | GitHub Actions | - |
| 本番インフラ | AWS ECS Fargate | - |
| 検証インフラ | 自宅サーバー（Docker Compose） | - |

---

## 選定理由

### バックエンド: Kotlin + Spring Boot

#### 選定理由

1. **業務への応用**
   - 社内の新規プロダクトでKotlin採用が増えており、実務で活用できる知識を得たい
   - Spring Bootはエンタープライズで広く使われており、業務直結の学習となる

2. **言語としてのメリット**
   - Null安全が言語レベルで強制される（`?` 型）
   - data class によるボイラープレート削減
   - コルーチンによる非同期処理のサポート
   - Java資産との100%互換性

3. **DDD/クリーンアーキテクチャとの親和性**
   - Spring Bootを使ったDDD実践例が豊富
   - Kotlinの簡潔な記法がドメインモデルの表現に適している

#### トレードオフ（認識しているデメリット）

- Javaより学習コストがかかる
- ビルド速度がJavaより遅い傾向
- 日本語情報がJavaより少ない

### フロントエンド: Next.js + TypeScript

#### 選定理由

1. **PWA対応が容易**
   - `next-pwa` などでPush通知対応が比較的簡単
   - iPad/スマホでのホーム画面追加でアプリライクに使える

2. **学習中の技術との連続性**
   - TypeScriptを学習中のため、追加の学習コストが低い

3. **OpenAPIとの統合**
   - `openapi-typescript` でバックエンドのAPI定義から型を自動生成
   - フロント・バック間の型安全性を確保

### DB: PostgreSQL

#### 選定理由

1. **JSON型サポート**
   - ルーティンの柔軟な構造をJSONBで表現可能
   - 将来の拡張に対応しやすい

2. **エンタープライズ標準**
   - 業務で使用される機会が多く、学習価値が高い

3. **エコシステム**
   - Docker公式イメージあり
   - Spring Data JPAとの統合が成熟

### インフラ: AWS ECS Fargate + 自宅サーバー

#### 選定理由

1. **AWS ECS Fargate**
   - エンタープライズでの採用実績が多い
   - コンテナベースのデプロイを学習できる
   - GitHub Actions → ECR → ECS の王道パイプラインを体験

2. **自宅サーバー**
   - 検証環境としてコスト0で常時稼働
   - Docker Composeでの運用経験を活かせる

#### 運用方針

- 自宅サーバー: 開発・検証用
- AWS: 本番用（学習のため、必要なときだけ起動してコスト抑制）

---

## アーキテクチャパターン

| パターン | 採用 | 理由 |
|---------|------|------|
| クリーンアーキテクチャ | ✅ | ドメインロジックの独立性確保、テスタビリティ向上 |
| DDD（ドメイン駆動設計） | ✅ | 複雑なビジネスロジックの表現、ユビキタス言語の確立 |
| CQRS | ✅ | 読み取り/書き込みの最適化、DDDとの親和性 |

詳細は `02_architecture-decisions.md` を参照。

---

## 今後の検討事項

- [ ] Kotlinのバージョン確定（1.9 or 2.0）
- [ ] Spring Bootのバージョン確定
- [ ] Next.jsのバージョン確定（App Router採用の可否）
- [ ] AWS構成の詳細設計
